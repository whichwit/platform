# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Basic workflow
'on':
  push:
    branches:
      - main
jobs:
  bazel_test:
    runs-on: ubuntu-latest
    container:
      image:  ubuntu:latest
    services:
      # Label used to access the service container
      mssql:
        # Docker Hub image
        image: mcr.microsoft.com/mssql/server
        env:
          ACCEPT_EULA: Y
          SA_PASSWORD: Password1!
        # options: -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=Password1!'
        # ports:
          # - 1433:1433
    steps:
      # - name: Check out repository code
        # uses: actions/checkout@v2
      # - run: sqlcmd -?
      # - run: docker-compose up -d
      # - run: docker ps -a
      # - run: sqlcmd -S mssql -U sa -P Password1! -Q "SET PARSEONLY ON; SELECT GETDATE()"
      - run: sqlcmd -S mssql:1433 -U sa -P Password1! -d master -Q "SELECT DB_NAME()"
      # - run: cat output.txt
      # - name: Set up Bazel
        # run: npm i @bazel/bazelisk
      # - run: npm i @bazel/bazelisk
      # - name: Execute unit test
        # run: bazelisk test //...